{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useDocumentLoader = void 0;\n\nvar react_1 = require(\"react\");\n\nvar state_1 = require(\"../state\");\n\nvar actions_1 = require(\"../state/actions\");\n\nvar fileLoaders_1 = require(\"./fileLoaders\");\n\nvar useRendererSelector_1 = require(\"./useRendererSelector\");\n/**\n * Custom Hook for loading the current document into context\n */\n\n\nexports.useDocumentLoader = function () {\n  var _a = react_1.useContext(state_1.DocViewerContext),\n      state = _a.state,\n      dispatch = _a.dispatch;\n\n  var currentFileNo = state.currentFileNo,\n      currentDocument = state.currentDocument;\n  var CurrentRenderer = useRendererSelector_1.useRendererSelector().CurrentRenderer;\n  var documentURI = (currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.uri) || \"\";\n  react_1.useEffect(function () {\n    if (!currentDocument) return;\n    if (currentDocument.fileType !== undefined) return;\n    var controller = new AbortController();\n    var signal = controller.signal;\n    fetch(documentURI, {\n      method: \"HEAD\",\n      signal: signal\n    }).then(function (response) {\n      var contentTypeRaw = response.headers.get(\"content-type\");\n      var contentTypes = (contentTypeRaw === null || contentTypeRaw === void 0 ? void 0 : contentTypeRaw.split(\";\")) || [];\n      var contentType = contentTypes.length ? contentTypes[0] : undefined;\n      dispatch(actions_1.updateCurrentDocument(__assign(__assign({}, currentDocument), {\n        fileType: contentType || undefined\n      })));\n    });\n    return function () {\n      controller.abort();\n    };\n  }, // eslint ignore added, because a warning appears for dispatch to\n  // be a dependancy of the useEffect\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [currentFileNo, documentURI]);\n  react_1.useEffect(function () {\n    var _a;\n\n    if (!currentDocument || CurrentRenderer === undefined) return;\n    var controller = new AbortController();\n    var signal = controller.signal;\n\n    var fileLoaderComplete = function (fileReader) {\n      if (!currentDocument || !fileReader) {\n        dispatch(actions_1.setDocumentLoading(false));\n        return;\n      }\n\n      var updatedDocument = __assign({}, currentDocument);\n\n      if (fileReader.result !== null) {\n        updatedDocument.fileData = fileReader.result;\n      }\n\n      dispatch(actions_1.updateCurrentDocument(updatedDocument));\n      dispatch(actions_1.setDocumentLoading(false));\n    };\n\n    if (CurrentRenderer === null) {\n      dispatch(actions_1.setDocumentLoading(false));\n    } else if (CurrentRenderer.fileLoader !== undefined) {\n      (_a = CurrentRenderer.fileLoader) === null || _a === void 0 ? void 0 : _a.call(CurrentRenderer, {\n        documentURI: documentURI,\n        signal: signal,\n        fileLoaderComplete: fileLoaderComplete\n      });\n    } else {\n      fileLoaders_1.defaultFileLoader({\n        documentURI: documentURI,\n        signal: signal,\n        fileLoaderComplete: fileLoaderComplete\n      });\n    }\n\n    return function () {\n      controller.abort();\n    };\n  }, [CurrentRenderer]);\n  return {\n    state: state,\n    dispatch: dispatch,\n    CurrentRenderer: CurrentRenderer\n  };\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","useDocumentLoader","react_1","require","state_1","actions_1","fileLoaders_1","useRendererSelector_1","_a","useContext","DocViewerContext","state","dispatch","currentFileNo","currentDocument","CurrentRenderer","useRendererSelector","documentURI","uri","useEffect","fileType","undefined","controller","AbortController","signal","fetch","method","then","response","contentTypeRaw","headers","get","contentTypes","split","contentType","updateCurrentDocument","abort","fileLoaderComplete","fileReader","setDocumentLoading","updatedDocument","result","fileData","fileLoader","defaultFileLoader"],"sources":["/home/bibhu/EDRdevelopment/DevBranch/ReactCodes/node_modules/react-doc-viewer/build/utils/useDocumentLoader.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useDocumentLoader = void 0;\nvar react_1 = require(\"react\");\nvar state_1 = require(\"../state\");\nvar actions_1 = require(\"../state/actions\");\nvar fileLoaders_1 = require(\"./fileLoaders\");\nvar useRendererSelector_1 = require(\"./useRendererSelector\");\n/**\n * Custom Hook for loading the current document into context\n */\nexports.useDocumentLoader = function () {\n    var _a = react_1.useContext(state_1.DocViewerContext), state = _a.state, dispatch = _a.dispatch;\n    var currentFileNo = state.currentFileNo, currentDocument = state.currentDocument;\n    var CurrentRenderer = useRendererSelector_1.useRendererSelector().CurrentRenderer;\n    var documentURI = (currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.uri) || \"\";\n    react_1.useEffect(function () {\n        if (!currentDocument)\n            return;\n        if (currentDocument.fileType !== undefined)\n            return;\n        var controller = new AbortController();\n        var signal = controller.signal;\n        fetch(documentURI, { method: \"HEAD\", signal: signal }).then(function (response) {\n            var contentTypeRaw = response.headers.get(\"content-type\");\n            var contentTypes = (contentTypeRaw === null || contentTypeRaw === void 0 ? void 0 : contentTypeRaw.split(\";\")) || [];\n            var contentType = contentTypes.length ? contentTypes[0] : undefined;\n            dispatch(actions_1.updateCurrentDocument(__assign(__assign({}, currentDocument), { fileType: contentType || undefined })));\n        });\n        return function () {\n            controller.abort();\n        };\n    }, \n    // eslint ignore added, because a warning appears for dispatch to\n    // be a dependancy of the useEffect\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [currentFileNo, documentURI]);\n    react_1.useEffect(function () {\n        var _a;\n        if (!currentDocument || CurrentRenderer === undefined)\n            return;\n        var controller = new AbortController();\n        var signal = controller.signal;\n        var fileLoaderComplete = function (fileReader) {\n            if (!currentDocument || !fileReader) {\n                dispatch(actions_1.setDocumentLoading(false));\n                return;\n            }\n            var updatedDocument = __assign({}, currentDocument);\n            if (fileReader.result !== null) {\n                updatedDocument.fileData = fileReader.result;\n            }\n            dispatch(actions_1.updateCurrentDocument(updatedDocument));\n            dispatch(actions_1.setDocumentLoading(false));\n        };\n        if (CurrentRenderer === null) {\n            dispatch(actions_1.setDocumentLoading(false));\n        }\n        else if (CurrentRenderer.fileLoader !== undefined) {\n            (_a = CurrentRenderer.fileLoader) === null || _a === void 0 ? void 0 : _a.call(CurrentRenderer, { documentURI: documentURI, signal: signal, fileLoaderComplete: fileLoaderComplete });\n        }\n        else {\n            fileLoaders_1.defaultFileLoader({ documentURI: documentURI, signal: signal, fileLoaderComplete: fileLoaderComplete });\n        }\n        return function () {\n            controller.abort();\n        };\n    }, [CurrentRenderer]);\n    return { state: state, dispatch: dispatch, CurrentRenderer: CurrentRenderer };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}