{"ast":null,"code":"/**\n * @licstart The following is the entire license notice for the\n * Javascript code in this page\n *\n * Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * Javascript code in this page\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidRotation = isValidRotation;\nexports.isValidScrollMode = isValidScrollMode;\nexports.isValidSpreadMode = isValidSpreadMode;\nexports.isPortraitOrientation = isPortraitOrientation;\nexports.getGlobalEventBus = getGlobalEventBus;\nexports.clamp = clamp;\nexports.getPDFFileNameFromURL = getPDFFileNameFromURL;\nexports.noContextMenuHandler = noContextMenuHandler;\nexports.parseQueryString = parseQueryString;\nexports.backtrackBeforeAllVisibleElements = backtrackBeforeAllVisibleElements;\nexports.getVisibleElements = getVisibleElements;\nexports.roundToDivide = roundToDivide;\nexports.getPageSizeInches = getPageSizeInches;\nexports.approximateFraction = approximateFraction;\nexports.getOutputScale = getOutputScale;\nexports.scrollIntoView = scrollIntoView;\nexports.watchScroll = watchScroll;\nexports.binarySearchFirstItem = binarySearchFirstItem;\nexports.normalizeWheelEventDelta = normalizeWheelEventDelta;\nexports.waitOnEventOrTimeout = waitOnEventOrTimeout;\nexports.moveToEndOfArray = moveToEndOfArray;\nexports.WaitOnType = exports.animationStarted = exports.ProgressBar = exports.EventBus = exports.NullL10n = exports.SpreadMode = exports.ScrollMode = exports.TextLayerMode = exports.RendererType = exports.PresentationModeState = exports.VERTICAL_PADDING = exports.SCROLLBAR_PADDING = exports.MAX_AUTO_SCALE = exports.UNKNOWN_SCALE = exports.MAX_SCALE = exports.MIN_SCALE = exports.DEFAULT_SCALE = exports.DEFAULT_SCALE_VALUE = exports.CSS_UNITS = exports.AutoPrintRegExp = void 0;\nconst CSS_UNITS = 96.0 / 72.0;\nexports.CSS_UNITS = CSS_UNITS;\nconst DEFAULT_SCALE_VALUE = \"auto\";\nexports.DEFAULT_SCALE_VALUE = DEFAULT_SCALE_VALUE;\nconst DEFAULT_SCALE = 1.0;\nexports.DEFAULT_SCALE = DEFAULT_SCALE;\nconst MIN_SCALE = 0.1;\nexports.MIN_SCALE = MIN_SCALE;\nconst MAX_SCALE = 10.0;\nexports.MAX_SCALE = MAX_SCALE;\nconst UNKNOWN_SCALE = 0;\nexports.UNKNOWN_SCALE = UNKNOWN_SCALE;\nconst MAX_AUTO_SCALE = 1.25;\nexports.MAX_AUTO_SCALE = MAX_AUTO_SCALE;\nconst SCROLLBAR_PADDING = 40;\nexports.SCROLLBAR_PADDING = SCROLLBAR_PADDING;\nconst VERTICAL_PADDING = 5;\nexports.VERTICAL_PADDING = VERTICAL_PADDING;\nconst PresentationModeState = {\n  UNKNOWN: 0,\n  NORMAL: 1,\n  CHANGING: 2,\n  FULLSCREEN: 3\n};\nexports.PresentationModeState = PresentationModeState;\nconst RendererType = {\n  CANVAS: \"canvas\",\n  SVG: \"svg\"\n};\nexports.RendererType = RendererType;\nconst TextLayerMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_ENHANCE: 2\n};\nexports.TextLayerMode = TextLayerMode;\nconst ScrollMode = {\n  UNKNOWN: -1,\n  VERTICAL: 0,\n  HORIZONTAL: 1,\n  WRAPPED: 2\n};\nexports.ScrollMode = ScrollMode;\nconst SpreadMode = {\n  UNKNOWN: -1,\n  NONE: 0,\n  ODD: 1,\n  EVEN: 2\n};\nexports.SpreadMode = SpreadMode;\nconst AutoPrintRegExp = /\\bprint\\s*\\(/;\nexports.AutoPrintRegExp = AutoPrintRegExp;\n\nfunction formatL10nValue(text, args) {\n  if (!args) {\n    return text;\n  }\n\n  return text.replace(/\\{\\{\\s*(\\w+)\\s*\\}\\}/g, (all, name) => {\n    return name in args ? args[name] : \"{{\" + name + \"}}\";\n  });\n}\n\nconst NullL10n = {\n  async getLanguage() {\n    return \"en-us\";\n  },\n\n  async getDirection() {\n    return \"ltr\";\n  },\n\n  async get(property, args, fallback) {\n    return formatL10nValue(fallback, args);\n  },\n\n  async translate(element) {}\n\n};\nexports.NullL10n = NullL10n;\n\nfunction getOutputScale(ctx) {\n  const devicePixelRatio = window.devicePixelRatio || 1;\n  const backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n  const pixelRatio = devicePixelRatio / backingStoreRatio;\n  return {\n    sx: pixelRatio,\n    sy: pixelRatio,\n    scaled: pixelRatio !== 1\n  };\n}\n\nfunction scrollIntoView(element, spot) {\n  let skipOverflowHiddenElements = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  let parent = element.offsetParent;\n\n  if (!parent) {\n    console.error(\"offsetParent is not set -- cannot scroll\");\n    return;\n  }\n\n  let offsetY = element.offsetTop + element.clientTop;\n  let offsetX = element.offsetLeft + element.clientLeft;\n\n  while (parent.clientHeight === parent.scrollHeight && parent.clientWidth === parent.scrollWidth || skipOverflowHiddenElements && getComputedStyle(parent).overflow === \"hidden\") {\n    if (parent.dataset._scaleY) {\n      offsetY /= parent.dataset._scaleY;\n      offsetX /= parent.dataset._scaleX;\n    }\n\n    offsetY += parent.offsetTop;\n    offsetX += parent.offsetLeft;\n    parent = parent.offsetParent;\n\n    if (!parent) {\n      return;\n    }\n  }\n\n  if (spot) {\n    if (spot.top !== undefined) {\n      offsetY += spot.top;\n    }\n\n    if (spot.left !== undefined) {\n      offsetX += spot.left;\n      parent.scrollLeft = offsetX;\n    }\n  }\n\n  parent.scrollTop = offsetY;\n}\n\nfunction watchScroll(viewAreaElement, callback) {\n  const debounceScroll = function (evt) {\n    if (rAF) {\n      return;\n    }\n\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\n      rAF = null;\n      const currentX = viewAreaElement.scrollLeft;\n      const lastX = state.lastX;\n\n      if (currentX !== lastX) {\n        state.right = currentX > lastX;\n      }\n\n      state.lastX = currentX;\n      const currentY = viewAreaElement.scrollTop;\n      const lastY = state.lastY;\n\n      if (currentY !== lastY) {\n        state.down = currentY > lastY;\n      }\n\n      state.lastY = currentY;\n      callback(state);\n    });\n  };\n\n  const state = {\n    right: true,\n    down: true,\n    lastX: viewAreaElement.scrollLeft,\n    lastY: viewAreaElement.scrollTop,\n    _eventHandler: debounceScroll\n  };\n  let rAF = null;\n  viewAreaElement.addEventListener(\"scroll\", debounceScroll, true);\n  return state;\n}\n\nfunction parseQueryString(query) {\n  const parts = query.split(\"&\");\n  const params = Object.create(null);\n\n  for (let i = 0, ii = parts.length; i < ii; ++i) {\n    const param = parts[i].split(\"=\");\n    const key = param[0].toLowerCase();\n    const value = param.length > 1 ? param[1] : null;\n    params[decodeURIComponent(key)] = decodeURIComponent(value);\n  }\n\n  return params;\n}\n\nfunction binarySearchFirstItem(items, condition) {\n  let minIndex = 0;\n  let maxIndex = items.length - 1;\n\n  if (items.length === 0 || !condition(items[maxIndex])) {\n    return items.length;\n  }\n\n  if (condition(items[minIndex])) {\n    return minIndex;\n  }\n\n  while (minIndex < maxIndex) {\n    const currentIndex = minIndex + maxIndex >> 1;\n    const currentItem = items[currentIndex];\n\n    if (condition(currentItem)) {\n      maxIndex = currentIndex;\n    } else {\n      minIndex = currentIndex + 1;\n    }\n  }\n\n  return minIndex;\n}\n\nfunction approximateFraction(x) {\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n\n  const xinv = 1 / x;\n  const limit = 8;\n\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n\n  const x_ = x > 1 ? xinv : x;\n  let a = 0,\n      b = 1,\n      c = 1,\n      d = 1;\n\n  while (true) {\n    const p = a + c,\n          q = b + d;\n\n    if (q > limit) {\n      break;\n    }\n\n    if (x_ <= p / q) {\n      c = p;\n      d = q;\n    } else {\n      a = p;\n      b = q;\n    }\n  }\n\n  let result;\n\n  if (x_ - a / b < c / d - x_) {\n    result = x_ === x ? [a, b] : [b, a];\n  } else {\n    result = x_ === x ? [c, d] : [d, c];\n  }\n\n  return result;\n}\n\nfunction roundToDivide(x, div) {\n  const r = x % div;\n  return r === 0 ? x : Math.round(x - r + div);\n}\n\nfunction getPageSizeInches(_ref) {\n  let {\n    view,\n    userUnit,\n    rotate\n  } = _ref;\n  const [x1, y1, x2, y2] = view;\n  const changeOrientation = rotate % 180 !== 0;\n  const width = (x2 - x1) / 72 * userUnit;\n  const height = (y2 - y1) / 72 * userUnit;\n  return {\n    width: changeOrientation ? height : width,\n    height: changeOrientation ? width : height\n  };\n}\n\nfunction backtrackBeforeAllVisibleElements(index, views, top) {\n  if (index < 2) {\n    return index;\n  }\n\n  let elt = views[index].div;\n  let pageTop = elt.offsetTop + elt.clientTop;\n\n  if (pageTop >= top) {\n    elt = views[index - 1].div;\n    pageTop = elt.offsetTop + elt.clientTop;\n  }\n\n  for (let i = index - 2; i >= 0; --i) {\n    elt = views[i].div;\n\n    if (elt.offsetTop + elt.clientTop + elt.clientHeight <= pageTop) {\n      break;\n    }\n\n    index = i;\n  }\n\n  return index;\n}\n\nfunction getVisibleElements(scrollEl, views) {\n  let sortByVisibility = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  let horizontal = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  const top = scrollEl.scrollTop,\n        bottom = top + scrollEl.clientHeight;\n  const left = scrollEl.scrollLeft,\n        right = left + scrollEl.clientWidth;\n\n  function isElementBottomAfterViewTop(view) {\n    const element = view.div;\n    const elementBottom = element.offsetTop + element.clientTop + element.clientHeight;\n    return elementBottom > top;\n  }\n\n  function isElementRightAfterViewLeft(view) {\n    const element = view.div;\n    const elementRight = element.offsetLeft + element.clientLeft + element.clientWidth;\n    return elementRight > left;\n  }\n\n  const visible = [],\n        numViews = views.length;\n  let firstVisibleElementInd = numViews === 0 ? 0 : binarySearchFirstItem(views, horizontal ? isElementRightAfterViewLeft : isElementBottomAfterViewTop);\n\n  if (firstVisibleElementInd > 0 && firstVisibleElementInd < numViews && !horizontal) {\n    firstVisibleElementInd = backtrackBeforeAllVisibleElements(firstVisibleElementInd, views, top);\n  }\n\n  let lastEdge = horizontal ? right : -1;\n\n  for (let i = firstVisibleElementInd; i < numViews; i++) {\n    const view = views[i],\n          element = view.div;\n    const currentWidth = element.offsetLeft + element.clientLeft;\n    const currentHeight = element.offsetTop + element.clientTop;\n    const viewWidth = element.clientWidth,\n          viewHeight = element.clientHeight;\n    const viewRight = currentWidth + viewWidth;\n    const viewBottom = currentHeight + viewHeight;\n\n    if (lastEdge === -1) {\n      if (viewBottom >= bottom) {\n        lastEdge = viewBottom;\n      }\n    } else if ((horizontal ? currentWidth : currentHeight) > lastEdge) {\n      break;\n    }\n\n    if (viewBottom <= top || currentHeight >= bottom || viewRight <= left || currentWidth >= right) {\n      continue;\n    }\n\n    const hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);\n    const hiddenWidth = Math.max(0, left - currentWidth) + Math.max(0, viewRight - right);\n    const percent = (viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth | 0;\n    visible.push({\n      id: view.id,\n      x: currentWidth,\n      y: currentHeight,\n      view,\n      percent\n    });\n  }\n\n  const first = visible[0],\n        last = visible[visible.length - 1];\n\n  if (sortByVisibility) {\n    visible.sort(function (a, b) {\n      const pc = a.percent - b.percent;\n\n      if (Math.abs(pc) > 0.001) {\n        return -pc;\n      }\n\n      return a.id - b.id;\n    });\n  }\n\n  return {\n    first,\n    last,\n    views: visible\n  };\n}\n\nfunction noContextMenuHandler(evt) {\n  evt.preventDefault();\n}\n\nfunction isDataSchema(url) {\n  let i = 0;\n  const ii = url.length;\n\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\n\nfunction getPDFFileNameFromURL(url) {\n  let defaultFilename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"document.pdf\";\n\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n\n  if (isDataSchema(url)) {\n    console.warn(\"getPDFFileNameFromURL: \" + 'ignoring \"data:\" URL for performance reasons.');\n    return defaultFilename;\n  }\n\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^\\/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^\\/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch (ex) {}\n    }\n  }\n\n  return suggestedFilename || defaultFilename;\n}\n\nfunction normalizeWheelEventDelta(evt) {\n  let delta = Math.sqrt(evt.deltaX * evt.deltaX + evt.deltaY * evt.deltaY);\n  const angle = Math.atan2(evt.deltaY, evt.deltaX);\n\n  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {\n    delta = -delta;\n  }\n\n  const MOUSE_DOM_DELTA_PIXEL_MODE = 0;\n  const MOUSE_DOM_DELTA_LINE_MODE = 1;\n  const MOUSE_PIXELS_PER_LINE = 30;\n  const MOUSE_LINES_PER_PAGE = 30;\n\n  if (evt.deltaMode === MOUSE_DOM_DELTA_PIXEL_MODE) {\n    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;\n  } else if (evt.deltaMode === MOUSE_DOM_DELTA_LINE_MODE) {\n    delta /= MOUSE_LINES_PER_PAGE;\n  }\n\n  return delta;\n}\n\nfunction isValidRotation(angle) {\n  return Number.isInteger(angle) && angle % 90 === 0;\n}\n\nfunction isValidScrollMode(mode) {\n  return Number.isInteger(mode) && Object.values(ScrollMode).includes(mode) && mode !== ScrollMode.UNKNOWN;\n}\n\nfunction isValidSpreadMode(mode) {\n  return Number.isInteger(mode) && Object.values(SpreadMode).includes(mode) && mode !== SpreadMode.UNKNOWN;\n}\n\nfunction isPortraitOrientation(size) {\n  return size.width <= size.height;\n}\n\nconst WaitOnType = {\n  EVENT: \"event\",\n  TIMEOUT: \"timeout\"\n};\nexports.WaitOnType = WaitOnType;\n\nfunction waitOnEventOrTimeout(_ref2) {\n  let {\n    target,\n    name,\n    delay = 0\n  } = _ref2;\n  return new Promise(function (resolve, reject) {\n    if (typeof target !== \"object\" || !(name && typeof name === \"string\") || !(Number.isInteger(delay) && delay >= 0)) {\n      throw new Error(\"waitOnEventOrTimeout - invalid parameters.\");\n    }\n\n    function handler(type) {\n      if (target instanceof EventBus) {\n        target._off(name, eventHandler);\n      } else {\n        target.removeEventListener(name, eventHandler);\n      }\n\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      resolve(type);\n    }\n\n    const eventHandler = handler.bind(null, WaitOnType.EVENT);\n\n    if (target instanceof EventBus) {\n      target._on(name, eventHandler);\n    } else {\n      target.addEventListener(name, eventHandler);\n    }\n\n    const timeoutHandler = handler.bind(null, WaitOnType.TIMEOUT);\n    const timeout = setTimeout(timeoutHandler, delay);\n  });\n}\n\nconst animationStarted = new Promise(function (resolve) {\n  window.requestAnimationFrame(resolve);\n});\nexports.animationStarted = animationStarted;\n\nfunction dispatchDOMEvent(eventName) {\n  let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  const details = Object.create(null);\n\n  if (args && args.length > 0) {\n    const obj = args[0];\n\n    for (const key in obj) {\n      const value = obj[key];\n\n      if (key === \"source\") {\n        if (value === window || value === document) {\n          return;\n        }\n\n        continue;\n      }\n\n      details[key] = value;\n    }\n  }\n\n  const event = document.createEvent(\"CustomEvent\");\n  event.initCustomEvent(eventName, true, true, details);\n  document.dispatchEvent(event);\n}\n\nclass EventBus {\n  constructor() {\n    let {\n      dispatchToDOM = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this._listeners = Object.create(null);\n    this._dispatchToDOM = dispatchToDOM === true;\n\n    if (dispatchToDOM) {\n      console.error(\"The `eventBusDispatchToDOM` option/preference is deprecated, \" + \"add event listeners to the EventBus instance rather than the DOM.\");\n    }\n  }\n\n  on(eventName, listener) {\n    this._on(eventName, listener, {\n      external: true\n    });\n  }\n\n  off(eventName, listener) {\n    this._off(eventName, listener, {\n      external: true\n    });\n  }\n\n  dispatch(eventName) {\n    const eventListeners = this._listeners[eventName];\n\n    if (!eventListeners || eventListeners.length === 0) {\n      if (this._dispatchToDOM) {\n        const args = Array.prototype.slice.call(arguments, 1);\n        dispatchDOMEvent(eventName, args);\n      }\n\n      return;\n    }\n\n    const args = Array.prototype.slice.call(arguments, 1);\n    let externalListeners;\n    eventListeners.slice(0).forEach(function (_ref3) {\n      let {\n        listener,\n        external\n      } = _ref3;\n\n      if (external) {\n        if (!externalListeners) {\n          externalListeners = [];\n        }\n\n        externalListeners.push(listener);\n        return;\n      }\n\n      listener.apply(null, args);\n    });\n\n    if (externalListeners) {\n      externalListeners.forEach(function (listener) {\n        listener.apply(null, args);\n      });\n      externalListeners = null;\n    }\n\n    if (this._dispatchToDOM) {\n      dispatchDOMEvent(eventName, args);\n    }\n  }\n\n  _on(eventName, listener) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let eventListeners = this._listeners[eventName];\n\n    if (!eventListeners) {\n      this._listeners[eventName] = eventListeners = [];\n    }\n\n    eventListeners.push({\n      listener,\n      external: (options && options.external) === true\n    });\n  }\n\n  _off(eventName, listener) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    const eventListeners = this._listeners[eventName];\n\n    if (!eventListeners) {\n      return;\n    }\n\n    for (let i = 0, ii = eventListeners.length; i < ii; i++) {\n      if (eventListeners[i].listener === listener) {\n        eventListeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n}\n\nexports.EventBus = EventBus;\nlet globalEventBus = null;\n\nfunction getGlobalEventBus() {\n  let dispatchToDOM = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  console.error(\"getGlobalEventBus is deprecated, use a manually created EventBus instance instead.\");\n\n  if (!globalEventBus) {\n    globalEventBus = new EventBus({\n      dispatchToDOM\n    });\n  }\n\n  return globalEventBus;\n}\n\nfunction clamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\n\nclass ProgressBar {\n  constructor(id) {\n    let {\n      height,\n      width,\n      units\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.visible = true;\n    this.div = document.querySelector(id + \" .progress\");\n    this.bar = this.div.parentNode;\n    this.height = height || 100;\n    this.width = width || 100;\n    this.units = units || \"%\";\n    this.div.style.height = this.height + this.units;\n    this.percent = 0;\n  }\n\n  _updateBar() {\n    if (this._indeterminate) {\n      this.div.classList.add(\"indeterminate\");\n      this.div.style.width = this.width + this.units;\n      return;\n    }\n\n    this.div.classList.remove(\"indeterminate\");\n    const progressSize = this.width * this._percent / 100;\n    this.div.style.width = progressSize + this.units;\n  }\n\n  get percent() {\n    return this._percent;\n  }\n\n  set percent(val) {\n    this._indeterminate = isNaN(val);\n    this._percent = clamp(val, 0, 100);\n\n    this._updateBar();\n  }\n\n  setWidth(viewer) {\n    if (!viewer) {\n      return;\n    }\n\n    const container = viewer.parentNode;\n    const scrollbarWidth = container.offsetWidth - viewer.offsetWidth;\n\n    if (scrollbarWidth > 0) {\n      this.bar.style.width = `calc(100% - ${scrollbarWidth}px)`;\n    }\n  }\n\n  hide() {\n    if (!this.visible) {\n      return;\n    }\n\n    this.visible = false;\n    this.bar.classList.add(\"hidden\");\n    document.body.classList.remove(\"loadingInProgress\");\n  }\n\n  show() {\n    if (this.visible) {\n      return;\n    }\n\n    this.visible = true;\n    document.body.classList.add(\"loadingInProgress\");\n    this.bar.classList.remove(\"hidden\");\n  }\n\n}\n\nexports.ProgressBar = ProgressBar;\n\nfunction moveToEndOfArray(arr, condition) {\n  const moved = [],\n        len = arr.length;\n  let write = 0;\n\n  for (let read = 0; read < len; ++read) {\n    if (condition(arr[read])) {\n      moved.push(arr[read]);\n    } else {\n      arr[write] = arr[read];\n      ++write;\n    }\n  }\n\n  for (let read = 0; write < len; ++read, ++write) {\n    arr[write] = moved[read];\n  }\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","isValidRotation","isValidScrollMode","isValidSpreadMode","isPortraitOrientation","getGlobalEventBus","clamp","getPDFFileNameFromURL","noContextMenuHandler","parseQueryString","backtrackBeforeAllVisibleElements","getVisibleElements","roundToDivide","getPageSizeInches","approximateFraction","getOutputScale","scrollIntoView","watchScroll","binarySearchFirstItem","normalizeWheelEventDelta","waitOnEventOrTimeout","moveToEndOfArray","WaitOnType","animationStarted","ProgressBar","EventBus","NullL10n","SpreadMode","ScrollMode","TextLayerMode","RendererType","PresentationModeState","VERTICAL_PADDING","SCROLLBAR_PADDING","MAX_AUTO_SCALE","UNKNOWN_SCALE","MAX_SCALE","MIN_SCALE","DEFAULT_SCALE","DEFAULT_SCALE_VALUE","CSS_UNITS","AutoPrintRegExp","UNKNOWN","NORMAL","CHANGING","FULLSCREEN","CANVAS","SVG","DISABLE","ENABLE","ENABLE_ENHANCE","VERTICAL","HORIZONTAL","WRAPPED","NONE","ODD","EVEN","formatL10nValue","text","args","replace","all","name","getLanguage","getDirection","get","property","fallback","translate","element","ctx","devicePixelRatio","window","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","sx","sy","scaled","spot","skipOverflowHiddenElements","parent","offsetParent","console","error","offsetY","offsetTop","clientTop","offsetX","offsetLeft","clientLeft","clientHeight","scrollHeight","clientWidth","scrollWidth","getComputedStyle","overflow","dataset","_scaleY","_scaleX","top","undefined","left","scrollLeft","scrollTop","viewAreaElement","callback","debounceScroll","evt","rAF","requestAnimationFrame","viewAreaElementScrolled","currentX","lastX","state","right","currentY","lastY","down","_eventHandler","addEventListener","query","parts","split","params","create","i","ii","length","param","key","toLowerCase","decodeURIComponent","items","condition","minIndex","maxIndex","currentIndex","currentItem","x","Math","floor","xinv","limit","x_","a","b","c","d","p","q","result","div","r","round","view","userUnit","rotate","x1","y1","x2","y2","changeOrientation","width","height","index","views","elt","pageTop","scrollEl","sortByVisibility","horizontal","bottom","isElementBottomAfterViewTop","elementBottom","isElementRightAfterViewLeft","elementRight","visible","numViews","firstVisibleElementInd","lastEdge","currentWidth","currentHeight","viewWidth","viewHeight","viewRight","viewBottom","hiddenHeight","max","hiddenWidth","percent","push","id","y","first","last","sort","pc","abs","preventDefault","isDataSchema","url","trim","substring","defaultFilename","warn","reURI","reFilename","splitURI","exec","suggestedFilename","includes","ex","delta","sqrt","deltaX","deltaY","angle","atan2","PI","MOUSE_DOM_DELTA_PIXEL_MODE","MOUSE_DOM_DELTA_LINE_MODE","MOUSE_PIXELS_PER_LINE","MOUSE_LINES_PER_PAGE","deltaMode","Number","isInteger","mode","values","size","EVENT","TIMEOUT","target","delay","Promise","resolve","reject","Error","handler","type","_off","eventHandler","removeEventListener","timeout","clearTimeout","bind","_on","timeoutHandler","setTimeout","dispatchDOMEvent","eventName","details","obj","document","event","createEvent","initCustomEvent","dispatchEvent","constructor","dispatchToDOM","_listeners","_dispatchToDOM","on","listener","external","off","dispatch","eventListeners","Array","prototype","slice","call","arguments","externalListeners","forEach","apply","options","splice","globalEventBus","v","min","units","querySelector","bar","parentNode","style","_updateBar","_indeterminate","classList","add","remove","progressSize","_percent","val","isNaN","setWidth","viewer","container","scrollbarWidth","offsetWidth","hide","body","show","arr","moved","len","write","read"],"sources":["/home/bibhu/EDRdevelopment/DevBranch/ReactCodes/node_modules/pdfjs-dist/lib/web/ui_utils.js"],"sourcesContent":["/**\n * @licstart The following is the entire license notice for the\n * Javascript code in this page\n *\n * Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * Javascript code in this page\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidRotation = isValidRotation;\nexports.isValidScrollMode = isValidScrollMode;\nexports.isValidSpreadMode = isValidSpreadMode;\nexports.isPortraitOrientation = isPortraitOrientation;\nexports.getGlobalEventBus = getGlobalEventBus;\nexports.clamp = clamp;\nexports.getPDFFileNameFromURL = getPDFFileNameFromURL;\nexports.noContextMenuHandler = noContextMenuHandler;\nexports.parseQueryString = parseQueryString;\nexports.backtrackBeforeAllVisibleElements = backtrackBeforeAllVisibleElements;\nexports.getVisibleElements = getVisibleElements;\nexports.roundToDivide = roundToDivide;\nexports.getPageSizeInches = getPageSizeInches;\nexports.approximateFraction = approximateFraction;\nexports.getOutputScale = getOutputScale;\nexports.scrollIntoView = scrollIntoView;\nexports.watchScroll = watchScroll;\nexports.binarySearchFirstItem = binarySearchFirstItem;\nexports.normalizeWheelEventDelta = normalizeWheelEventDelta;\nexports.waitOnEventOrTimeout = waitOnEventOrTimeout;\nexports.moveToEndOfArray = moveToEndOfArray;\nexports.WaitOnType = exports.animationStarted = exports.ProgressBar = exports.EventBus = exports.NullL10n = exports.SpreadMode = exports.ScrollMode = exports.TextLayerMode = exports.RendererType = exports.PresentationModeState = exports.VERTICAL_PADDING = exports.SCROLLBAR_PADDING = exports.MAX_AUTO_SCALE = exports.UNKNOWN_SCALE = exports.MAX_SCALE = exports.MIN_SCALE = exports.DEFAULT_SCALE = exports.DEFAULT_SCALE_VALUE = exports.CSS_UNITS = exports.AutoPrintRegExp = void 0;\nconst CSS_UNITS = 96.0 / 72.0;\nexports.CSS_UNITS = CSS_UNITS;\nconst DEFAULT_SCALE_VALUE = \"auto\";\nexports.DEFAULT_SCALE_VALUE = DEFAULT_SCALE_VALUE;\nconst DEFAULT_SCALE = 1.0;\nexports.DEFAULT_SCALE = DEFAULT_SCALE;\nconst MIN_SCALE = 0.1;\nexports.MIN_SCALE = MIN_SCALE;\nconst MAX_SCALE = 10.0;\nexports.MAX_SCALE = MAX_SCALE;\nconst UNKNOWN_SCALE = 0;\nexports.UNKNOWN_SCALE = UNKNOWN_SCALE;\nconst MAX_AUTO_SCALE = 1.25;\nexports.MAX_AUTO_SCALE = MAX_AUTO_SCALE;\nconst SCROLLBAR_PADDING = 40;\nexports.SCROLLBAR_PADDING = SCROLLBAR_PADDING;\nconst VERTICAL_PADDING = 5;\nexports.VERTICAL_PADDING = VERTICAL_PADDING;\nconst PresentationModeState = {\n  UNKNOWN: 0,\n  NORMAL: 1,\n  CHANGING: 2,\n  FULLSCREEN: 3\n};\nexports.PresentationModeState = PresentationModeState;\nconst RendererType = {\n  CANVAS: \"canvas\",\n  SVG: \"svg\"\n};\nexports.RendererType = RendererType;\nconst TextLayerMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_ENHANCE: 2\n};\nexports.TextLayerMode = TextLayerMode;\nconst ScrollMode = {\n  UNKNOWN: -1,\n  VERTICAL: 0,\n  HORIZONTAL: 1,\n  WRAPPED: 2\n};\nexports.ScrollMode = ScrollMode;\nconst SpreadMode = {\n  UNKNOWN: -1,\n  NONE: 0,\n  ODD: 1,\n  EVEN: 2\n};\nexports.SpreadMode = SpreadMode;\nconst AutoPrintRegExp = /\\bprint\\s*\\(/;\nexports.AutoPrintRegExp = AutoPrintRegExp;\n\nfunction formatL10nValue(text, args) {\n  if (!args) {\n    return text;\n  }\n\n  return text.replace(/\\{\\{\\s*(\\w+)\\s*\\}\\}/g, (all, name) => {\n    return name in args ? args[name] : \"{{\" + name + \"}}\";\n  });\n}\n\nconst NullL10n = {\n  async getLanguage() {\n    return \"en-us\";\n  },\n\n  async getDirection() {\n    return \"ltr\";\n  },\n\n  async get(property, args, fallback) {\n    return formatL10nValue(fallback, args);\n  },\n\n  async translate(element) {}\n\n};\nexports.NullL10n = NullL10n;\n\nfunction getOutputScale(ctx) {\n  const devicePixelRatio = window.devicePixelRatio || 1;\n  const backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n  const pixelRatio = devicePixelRatio / backingStoreRatio;\n  return {\n    sx: pixelRatio,\n    sy: pixelRatio,\n    scaled: pixelRatio !== 1\n  };\n}\n\nfunction scrollIntoView(element, spot, skipOverflowHiddenElements = false) {\n  let parent = element.offsetParent;\n\n  if (!parent) {\n    console.error(\"offsetParent is not set -- cannot scroll\");\n    return;\n  }\n\n  let offsetY = element.offsetTop + element.clientTop;\n  let offsetX = element.offsetLeft + element.clientLeft;\n\n  while (parent.clientHeight === parent.scrollHeight && parent.clientWidth === parent.scrollWidth || skipOverflowHiddenElements && getComputedStyle(parent).overflow === \"hidden\") {\n    if (parent.dataset._scaleY) {\n      offsetY /= parent.dataset._scaleY;\n      offsetX /= parent.dataset._scaleX;\n    }\n\n    offsetY += parent.offsetTop;\n    offsetX += parent.offsetLeft;\n    parent = parent.offsetParent;\n\n    if (!parent) {\n      return;\n    }\n  }\n\n  if (spot) {\n    if (spot.top !== undefined) {\n      offsetY += spot.top;\n    }\n\n    if (spot.left !== undefined) {\n      offsetX += spot.left;\n      parent.scrollLeft = offsetX;\n    }\n  }\n\n  parent.scrollTop = offsetY;\n}\n\nfunction watchScroll(viewAreaElement, callback) {\n  const debounceScroll = function (evt) {\n    if (rAF) {\n      return;\n    }\n\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\n      rAF = null;\n      const currentX = viewAreaElement.scrollLeft;\n      const lastX = state.lastX;\n\n      if (currentX !== lastX) {\n        state.right = currentX > lastX;\n      }\n\n      state.lastX = currentX;\n      const currentY = viewAreaElement.scrollTop;\n      const lastY = state.lastY;\n\n      if (currentY !== lastY) {\n        state.down = currentY > lastY;\n      }\n\n      state.lastY = currentY;\n      callback(state);\n    });\n  };\n\n  const state = {\n    right: true,\n    down: true,\n    lastX: viewAreaElement.scrollLeft,\n    lastY: viewAreaElement.scrollTop,\n    _eventHandler: debounceScroll\n  };\n  let rAF = null;\n  viewAreaElement.addEventListener(\"scroll\", debounceScroll, true);\n  return state;\n}\n\nfunction parseQueryString(query) {\n  const parts = query.split(\"&\");\n  const params = Object.create(null);\n\n  for (let i = 0, ii = parts.length; i < ii; ++i) {\n    const param = parts[i].split(\"=\");\n    const key = param[0].toLowerCase();\n    const value = param.length > 1 ? param[1] : null;\n    params[decodeURIComponent(key)] = decodeURIComponent(value);\n  }\n\n  return params;\n}\n\nfunction binarySearchFirstItem(items, condition) {\n  let minIndex = 0;\n  let maxIndex = items.length - 1;\n\n  if (items.length === 0 || !condition(items[maxIndex])) {\n    return items.length;\n  }\n\n  if (condition(items[minIndex])) {\n    return minIndex;\n  }\n\n  while (minIndex < maxIndex) {\n    const currentIndex = minIndex + maxIndex >> 1;\n    const currentItem = items[currentIndex];\n\n    if (condition(currentItem)) {\n      maxIndex = currentIndex;\n    } else {\n      minIndex = currentIndex + 1;\n    }\n  }\n\n  return minIndex;\n}\n\nfunction approximateFraction(x) {\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n\n  const xinv = 1 / x;\n  const limit = 8;\n\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n\n  const x_ = x > 1 ? xinv : x;\n  let a = 0,\n      b = 1,\n      c = 1,\n      d = 1;\n\n  while (true) {\n    const p = a + c,\n          q = b + d;\n\n    if (q > limit) {\n      break;\n    }\n\n    if (x_ <= p / q) {\n      c = p;\n      d = q;\n    } else {\n      a = p;\n      b = q;\n    }\n  }\n\n  let result;\n\n  if (x_ - a / b < c / d - x_) {\n    result = x_ === x ? [a, b] : [b, a];\n  } else {\n    result = x_ === x ? [c, d] : [d, c];\n  }\n\n  return result;\n}\n\nfunction roundToDivide(x, div) {\n  const r = x % div;\n  return r === 0 ? x : Math.round(x - r + div);\n}\n\nfunction getPageSizeInches({\n  view,\n  userUnit,\n  rotate\n}) {\n  const [x1, y1, x2, y2] = view;\n  const changeOrientation = rotate % 180 !== 0;\n  const width = (x2 - x1) / 72 * userUnit;\n  const height = (y2 - y1) / 72 * userUnit;\n  return {\n    width: changeOrientation ? height : width,\n    height: changeOrientation ? width : height\n  };\n}\n\nfunction backtrackBeforeAllVisibleElements(index, views, top) {\n  if (index < 2) {\n    return index;\n  }\n\n  let elt = views[index].div;\n  let pageTop = elt.offsetTop + elt.clientTop;\n\n  if (pageTop >= top) {\n    elt = views[index - 1].div;\n    pageTop = elt.offsetTop + elt.clientTop;\n  }\n\n  for (let i = index - 2; i >= 0; --i) {\n    elt = views[i].div;\n\n    if (elt.offsetTop + elt.clientTop + elt.clientHeight <= pageTop) {\n      break;\n    }\n\n    index = i;\n  }\n\n  return index;\n}\n\nfunction getVisibleElements(scrollEl, views, sortByVisibility = false, horizontal = false) {\n  const top = scrollEl.scrollTop,\n        bottom = top + scrollEl.clientHeight;\n  const left = scrollEl.scrollLeft,\n        right = left + scrollEl.clientWidth;\n\n  function isElementBottomAfterViewTop(view) {\n    const element = view.div;\n    const elementBottom = element.offsetTop + element.clientTop + element.clientHeight;\n    return elementBottom > top;\n  }\n\n  function isElementRightAfterViewLeft(view) {\n    const element = view.div;\n    const elementRight = element.offsetLeft + element.clientLeft + element.clientWidth;\n    return elementRight > left;\n  }\n\n  const visible = [],\n        numViews = views.length;\n  let firstVisibleElementInd = numViews === 0 ? 0 : binarySearchFirstItem(views, horizontal ? isElementRightAfterViewLeft : isElementBottomAfterViewTop);\n\n  if (firstVisibleElementInd > 0 && firstVisibleElementInd < numViews && !horizontal) {\n    firstVisibleElementInd = backtrackBeforeAllVisibleElements(firstVisibleElementInd, views, top);\n  }\n\n  let lastEdge = horizontal ? right : -1;\n\n  for (let i = firstVisibleElementInd; i < numViews; i++) {\n    const view = views[i],\n          element = view.div;\n    const currentWidth = element.offsetLeft + element.clientLeft;\n    const currentHeight = element.offsetTop + element.clientTop;\n    const viewWidth = element.clientWidth,\n          viewHeight = element.clientHeight;\n    const viewRight = currentWidth + viewWidth;\n    const viewBottom = currentHeight + viewHeight;\n\n    if (lastEdge === -1) {\n      if (viewBottom >= bottom) {\n        lastEdge = viewBottom;\n      }\n    } else if ((horizontal ? currentWidth : currentHeight) > lastEdge) {\n      break;\n    }\n\n    if (viewBottom <= top || currentHeight >= bottom || viewRight <= left || currentWidth >= right) {\n      continue;\n    }\n\n    const hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);\n    const hiddenWidth = Math.max(0, left - currentWidth) + Math.max(0, viewRight - right);\n    const percent = (viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth | 0;\n    visible.push({\n      id: view.id,\n      x: currentWidth,\n      y: currentHeight,\n      view,\n      percent\n    });\n  }\n\n  const first = visible[0],\n        last = visible[visible.length - 1];\n\n  if (sortByVisibility) {\n    visible.sort(function (a, b) {\n      const pc = a.percent - b.percent;\n\n      if (Math.abs(pc) > 0.001) {\n        return -pc;\n      }\n\n      return a.id - b.id;\n    });\n  }\n\n  return {\n    first,\n    last,\n    views: visible\n  };\n}\n\nfunction noContextMenuHandler(evt) {\n  evt.preventDefault();\n}\n\nfunction isDataSchema(url) {\n  let i = 0;\n  const ii = url.length;\n\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\n\nfunction getPDFFileNameFromURL(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n\n  if (isDataSchema(url)) {\n    console.warn(\"getPDFFileNameFromURL: \" + 'ignoring \"data:\" URL for performance reasons.');\n    return defaultFilename;\n  }\n\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^\\/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^\\/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch (ex) {}\n    }\n  }\n\n  return suggestedFilename || defaultFilename;\n}\n\nfunction normalizeWheelEventDelta(evt) {\n  let delta = Math.sqrt(evt.deltaX * evt.deltaX + evt.deltaY * evt.deltaY);\n  const angle = Math.atan2(evt.deltaY, evt.deltaX);\n\n  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {\n    delta = -delta;\n  }\n\n  const MOUSE_DOM_DELTA_PIXEL_MODE = 0;\n  const MOUSE_DOM_DELTA_LINE_MODE = 1;\n  const MOUSE_PIXELS_PER_LINE = 30;\n  const MOUSE_LINES_PER_PAGE = 30;\n\n  if (evt.deltaMode === MOUSE_DOM_DELTA_PIXEL_MODE) {\n    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;\n  } else if (evt.deltaMode === MOUSE_DOM_DELTA_LINE_MODE) {\n    delta /= MOUSE_LINES_PER_PAGE;\n  }\n\n  return delta;\n}\n\nfunction isValidRotation(angle) {\n  return Number.isInteger(angle) && angle % 90 === 0;\n}\n\nfunction isValidScrollMode(mode) {\n  return Number.isInteger(mode) && Object.values(ScrollMode).includes(mode) && mode !== ScrollMode.UNKNOWN;\n}\n\nfunction isValidSpreadMode(mode) {\n  return Number.isInteger(mode) && Object.values(SpreadMode).includes(mode) && mode !== SpreadMode.UNKNOWN;\n}\n\nfunction isPortraitOrientation(size) {\n  return size.width <= size.height;\n}\n\nconst WaitOnType = {\n  EVENT: \"event\",\n  TIMEOUT: \"timeout\"\n};\nexports.WaitOnType = WaitOnType;\n\nfunction waitOnEventOrTimeout({\n  target,\n  name,\n  delay = 0\n}) {\n  return new Promise(function (resolve, reject) {\n    if (typeof target !== \"object\" || !(name && typeof name === \"string\") || !(Number.isInteger(delay) && delay >= 0)) {\n      throw new Error(\"waitOnEventOrTimeout - invalid parameters.\");\n    }\n\n    function handler(type) {\n      if (target instanceof EventBus) {\n        target._off(name, eventHandler);\n      } else {\n        target.removeEventListener(name, eventHandler);\n      }\n\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      resolve(type);\n    }\n\n    const eventHandler = handler.bind(null, WaitOnType.EVENT);\n\n    if (target instanceof EventBus) {\n      target._on(name, eventHandler);\n    } else {\n      target.addEventListener(name, eventHandler);\n    }\n\n    const timeoutHandler = handler.bind(null, WaitOnType.TIMEOUT);\n    const timeout = setTimeout(timeoutHandler, delay);\n  });\n}\n\nconst animationStarted = new Promise(function (resolve) {\n  window.requestAnimationFrame(resolve);\n});\nexports.animationStarted = animationStarted;\n\nfunction dispatchDOMEvent(eventName, args = null) {\n  const details = Object.create(null);\n\n  if (args && args.length > 0) {\n    const obj = args[0];\n\n    for (const key in obj) {\n      const value = obj[key];\n\n      if (key === \"source\") {\n        if (value === window || value === document) {\n          return;\n        }\n\n        continue;\n      }\n\n      details[key] = value;\n    }\n  }\n\n  const event = document.createEvent(\"CustomEvent\");\n  event.initCustomEvent(eventName, true, true, details);\n  document.dispatchEvent(event);\n}\n\nclass EventBus {\n  constructor({\n    dispatchToDOM = false\n  } = {}) {\n    this._listeners = Object.create(null);\n    this._dispatchToDOM = dispatchToDOM === true;\n\n    if (dispatchToDOM) {\n      console.error(\"The `eventBusDispatchToDOM` option/preference is deprecated, \" + \"add event listeners to the EventBus instance rather than the DOM.\");\n    }\n  }\n\n  on(eventName, listener) {\n    this._on(eventName, listener, {\n      external: true\n    });\n  }\n\n  off(eventName, listener) {\n    this._off(eventName, listener, {\n      external: true\n    });\n  }\n\n  dispatch(eventName) {\n    const eventListeners = this._listeners[eventName];\n\n    if (!eventListeners || eventListeners.length === 0) {\n      if (this._dispatchToDOM) {\n        const args = Array.prototype.slice.call(arguments, 1);\n        dispatchDOMEvent(eventName, args);\n      }\n\n      return;\n    }\n\n    const args = Array.prototype.slice.call(arguments, 1);\n    let externalListeners;\n    eventListeners.slice(0).forEach(function ({\n      listener,\n      external\n    }) {\n      if (external) {\n        if (!externalListeners) {\n          externalListeners = [];\n        }\n\n        externalListeners.push(listener);\n        return;\n      }\n\n      listener.apply(null, args);\n    });\n\n    if (externalListeners) {\n      externalListeners.forEach(function (listener) {\n        listener.apply(null, args);\n      });\n      externalListeners = null;\n    }\n\n    if (this._dispatchToDOM) {\n      dispatchDOMEvent(eventName, args);\n    }\n  }\n\n  _on(eventName, listener, options = null) {\n    let eventListeners = this._listeners[eventName];\n\n    if (!eventListeners) {\n      this._listeners[eventName] = eventListeners = [];\n    }\n\n    eventListeners.push({\n      listener,\n      external: (options && options.external) === true\n    });\n  }\n\n  _off(eventName, listener, options = null) {\n    const eventListeners = this._listeners[eventName];\n\n    if (!eventListeners) {\n      return;\n    }\n\n    for (let i = 0, ii = eventListeners.length; i < ii; i++) {\n      if (eventListeners[i].listener === listener) {\n        eventListeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n}\n\nexports.EventBus = EventBus;\nlet globalEventBus = null;\n\nfunction getGlobalEventBus(dispatchToDOM = false) {\n  console.error(\"getGlobalEventBus is deprecated, use a manually created EventBus instance instead.\");\n\n  if (!globalEventBus) {\n    globalEventBus = new EventBus({\n      dispatchToDOM\n    });\n  }\n\n  return globalEventBus;\n}\n\nfunction clamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\n\nclass ProgressBar {\n  constructor(id, {\n    height,\n    width,\n    units\n  } = {}) {\n    this.visible = true;\n    this.div = document.querySelector(id + \" .progress\");\n    this.bar = this.div.parentNode;\n    this.height = height || 100;\n    this.width = width || 100;\n    this.units = units || \"%\";\n    this.div.style.height = this.height + this.units;\n    this.percent = 0;\n  }\n\n  _updateBar() {\n    if (this._indeterminate) {\n      this.div.classList.add(\"indeterminate\");\n      this.div.style.width = this.width + this.units;\n      return;\n    }\n\n    this.div.classList.remove(\"indeterminate\");\n    const progressSize = this.width * this._percent / 100;\n    this.div.style.width = progressSize + this.units;\n  }\n\n  get percent() {\n    return this._percent;\n  }\n\n  set percent(val) {\n    this._indeterminate = isNaN(val);\n    this._percent = clamp(val, 0, 100);\n\n    this._updateBar();\n  }\n\n  setWidth(viewer) {\n    if (!viewer) {\n      return;\n    }\n\n    const container = viewer.parentNode;\n    const scrollbarWidth = container.offsetWidth - viewer.offsetWidth;\n\n    if (scrollbarWidth > 0) {\n      this.bar.style.width = `calc(100% - ${scrollbarWidth}px)`;\n    }\n  }\n\n  hide() {\n    if (!this.visible) {\n      return;\n    }\n\n    this.visible = false;\n    this.bar.classList.add(\"hidden\");\n    document.body.classList.remove(\"loadingInProgress\");\n  }\n\n  show() {\n    if (this.visible) {\n      return;\n    }\n\n    this.visible = true;\n    document.body.classList.add(\"loadingInProgress\");\n    this.bar.classList.remove(\"hidden\");\n  }\n\n}\n\nexports.ProgressBar = ProgressBar;\n\nfunction moveToEndOfArray(arr, condition) {\n  const moved = [],\n        len = arr.length;\n  let write = 0;\n\n  for (let read = 0; read < len; ++read) {\n    if (condition(arr[read])) {\n      moved.push(arr[read]);\n    } else {\n      arr[write] = arr[read];\n      ++write;\n    }\n  }\n\n  for (let read = 0; write < len; ++read, ++write) {\n    arr[write] = moved[read];\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}